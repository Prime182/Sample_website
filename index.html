<!DOCTYPE html>
<html>
<head>
    <title>My Awesome Website</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f0f0;
        }
        h1 {
            color: #333;
        }
    </style>
</head>
<body>
    <h1>Hello, World!</h1>
    <p>Welcome to my GitHub Pages website. Tracking is active!</p>

    <script>
      // Extract query parameters
      const urlParams = new URLSearchParams(window.location.search);
      const lead_id = urlParams.get('lead_id');
      const campaign_id = urlParams.get('campaign_id');
      let status = urlParams.get('status');

      if (!status) status = "Visited";  // Default status if not provided

      if (lead_id && campaign_id) {  // Proceed if lead_id and campaign_id are present
        // Send an HTTP request to update the database
        fetch("https://hobby-playlist-rv-decade.trycloudflare.com/update-visit", {
          method: "POST",
          mode: 'no-cors',   // Prevents CORS errors, but you won't get a response back
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ lead_id, campaign_id, status })
        }).then(response => {
          console.log("Tracking data sent successfully.");
        }).catch(error => console.error("Error:", error));
      }
    </script>
</body>
</html>

